<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<title>JRTrace Annotation Reference</title>
</head>

<body style="font-family:sans-serif">
<h1>Annotation Reference   - incomplete, refer to the JavaDoc for now -</h1>

The general concept of JRTrace requires one or more classes that are annotated. The annotations specify if, where and which methods
will be injected into the running application.



 <table border="1" style="width:100%"  >
  <tr>
    <th>Annotation</th>
    <th>Attribute</th>
    <th>Description</th>
  </tr>
  <tr>
    <td><code>@XClass</code></td>
    <td></td>
    <td>A class that can be used with JRTrace. If a class is installed using JRTrace without annotations, 
    this is equivalent to using <code>@XClass()</code>.
    </td>
 
   
   </tr>
    <tr>
    <td></td> 
    <td><code>classes</code></td>
    
    <td>One or more fully qualified class names. Tracing code will only be injected into classes that match the provided <code>classes</code> entries.
    
    <p>Example: injection of methods from this class is restricted to classes <code>a.b.C</code> and <code>d.e.F</code>
    <pre>
    @XClass(classes={"a.b.C","d.e.F"})
    class Trace
    {
    	...
    }
    </pre>
    </p>
    </td>
    
     <tr>
       <tr>
    <td></td> 
    <td><code>exclude</code></td>
    
    <td>One or more <b>regular</b> expressions that can be used to exclude classes from instrumentation.
    <p>Example: the below snippet will inject tracing statements into all classes (<code>classes=".*"</code>)
     that don't match "java.*" and "de\\.schenk\\.jrtrace
    <pre>
    @XClass(exclude={"java.*","de\\.schenk\\.jrtrace.*"},classes=".*",regex=true)
    class Trace
    {
    		...
    }
    </pre>
    </p>
    </td>
    
     <tr>
     
    <td></td> 
    <td><code>regex</code></td>
    
    <td>All string matching operations on class names, method names and argument names are performed using java regular expressions if this
    attribute is set to true. This attribute is defined once on classlevel and effects all contained annotations that refer to java names and types.
    <p>Example: the below class will inject code into all classes from the namespace "org.company". 
    <pre>
    @XClass(classes={"org\\.company\\..*"},regex=true)
    class Trace
    {
    	...
    }
    </pre>
    </p>
    </td>
    
  </tr>
    <tr>
    <td></td> 
    <td><code>classloaderpolicy</code></td>
    
    <td>The classloaderpolicy attribute can be used to define which classloader should load the injected code. By default this attribute is set to
    <code>XClassLoaderPolicy.BOOT</code> which corresponds using the boot classpath. 
    <p>Example: the code of the below class will always be loaded using the classloader of the class into which the code was injected. Note that this
    might imply, that the tracing code is loaded multiple times by multiple classloaders if it is injected into classes that use different classloaders. 
    <pre>
    @XClass(classes={"de.schenk.MyClass"},classloaderpolicy=XClassLoaderPolicy.TARGET)
    class Trace
    {
    	...
    }
    </pre>
    </p>
    </td>
    
  </tr>
    </tr>
    <tr>
    <td></td> 
    <td><code>classloadername</code></td>
    
    <td>The classloadername attribute can be used together with the classloaderpolicy NAMED. It allows to specify a class that will be used to lookup
    the classloader to use for the injected code.
    <p>Example: In the below example the injected code will be loaded using the classloader that loaded the <code>ResourcesPlugin</code>. Note that if the specified class
    hasn't been loaded yet, this will fail. Effectively the injected code will now be allowed to use all classes that are accessible to the org.eclipse.core.resources plugin. 
    <pre>
    @XClass(names={"de.schenk.MyClass"},classloaderpolicy=XClassLoaderPolicy.NAMED,classloadername="org.eclipse.core.resources.ResourcesPlugin")
    class Trace
    {
    }
    </pre>
    </p>
    </td>
    
  </tr>
</table> 
 
</body>
</html>